function addMask(e){var t='<div class="cbp-popup-wrap cbp-popup-lightbox cbp-popup-ready font-grey-steel" style="text-align:left;">        <div class="col-md-10">'+e+'</div>        <div class="cbp-popup-close"></div>      </div>';$("body").append(t),$(".cbp-popup-close").on("click",function(){$(".cbp-popup-wrap").remove()})}function infoTips(e,t,a){"undefined"==typeof a&&(a=""),"undefined"==typeof t&&(t=0),infoType=["danger","success","info","warning"],App.alert({container:a,place:"append",type:infoType[t],message:e,close:!0,reset:!1,focus:!0,closeInSeconds:t?5:0,icon:"info-circle"})}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function bsTips(e,t){"undefined"==typeof t&&(t=0),toastr.options={closeButton:!0,debug:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"1000",hideDuration:"1000",timeOut:t?"5000":"0",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},infoType=["error","success","info","warning"],toastr[infoType[t]](e)}function PromotAlert(e,t){bootbox.prompt(e,function(e){null!==e&&success()})}function getRootPath(e){var t=window.document.location.href,a=window.document.location.pathname,n=t.indexOf(a),r=t.substring(0,n),o=a.substring(0,a.substr(1).indexOf("/")+1);return 0===e?r+o:r}function getRootUrl(e){return window.document.location.href.substring(0,window.document.location.href.indexOf(e))+e+"/"}function today(e){var t,a=new Date,n=a.getFullYear(),r=jsRight("0"+(a.getMonth()+1),2),o=jsRight("0"+a.getDate(),2),i=jsRight("0"+a.getHours(),2),s=jsRight("0"+a.getMinutes(),2),c=jsRight("0"+a.getSeconds(),2);switch(e){case 0:t=n+"年"+r+"月"+o+"日";break;case 1:t=n+"-"+r+"-"+o+" "+i+":"+s+":"+c;break;case 2:t=n+"年"+r+"月"+o+"日"+i+"时"+s+"分"+c+"秒";break;case 3:t=n+"-"+r+"-"+o+" "+i+":"+s;break;case 4:t=n+"年"+r+"月"+o+"日  "+i+"时"+s+"分";break;case 5:t=r+"/"+o+"/"+n;break;case 6:t=n+"-"+r+"-"+o;break;case 7:t=n+"-"+r;break;case 8:t=n+r+o}return t}function data2ThousandSeparator(e,t){return t=t||0,((t?e.toFixed(2):e)+"").replace(/\d{1,3}(?=(\d{3})+(\.\d*)?$)/g,"$&,")}function Json2Array(e){for(var t=0,a=[],n=0;n<e.rows;n++){t=0,a[n]=[];for(var r in e.data[n])a[n][t]=e.data[n][r],t++}return a}function Json2Head(e){var t,a="",n="title";for(var r in e.data[0])t='{"'+n+'":"'+r+'"},',a+=t;return a="["+a+"]",$.parseJSON(a)}function handleAjaxData(e){return e=e.replace(/\r\n/g,"<br>").replace(/\t/g," ").replace(/  */g," ").replace(/<br><br>/g,"<br>").replace(/<br> <br>/g,"<br>").replace(/\\/g,"、"),jQuery.parseJSON(e)}function ReadData(e,t){var a=e.split("ID=")[1].split("&")[0];config.SHOWDEBUGTIME&&(a+=" 共耗时",console.time(a));var n={};return t=t?"GET":"POST",$.ajax({type:t,async:!1,url:e,success:function(e,t){n=handleAjaxData(e)},error:function(e){console.log("read data error:<br>"),console.log(e.responseText)}}),config.SHOWDEBUGTIME&&console.timeEnd(a),n}function handleError(e){console.log(e);var t=e.responseText.match(/<div[^>]*>([\s\S]+?)<\/div>/i);return t.length>0?t[1]:e}function ReadJson(e){var t;return $.get({url:e,async:!1,success:function(e){t=e}}),t}function UpdateData(e,t,a){a=a?"GET":"POST",$.ajax({type:a,async:!1,url:e,success:function(e,t){var a=$.parseJSON(e);infoTips(a.message,a.type)}})}function GetSelectStr(e){var t,a='<option value="-1"></option>';for(t=0;t<e.rows;t++)a+='<option value="'+e.data[t][0]+'">'+e.data[t][1]+"</option>";return a}function InitSelect(e,t){$("select[name='"+e+"']").html(GetSelectStr(t))}function SetSelectVal(e,t){$("select[name='"+e+"']").val(t)}function SwitchSelect(e,t){var a="input:radio[name="+e+"]:nth("+t+")";return a}function GetSwitchValue(e,t){for(var a=$("input:radio[name="+e+"]:nth(0)").bootstrapSwitch("state"),n=1;n<=t&&!a;n++)a=$("input:radio[name="+e+"]:nth("+n+")").bootstrapSwitch("state");return n}function initDashboardDaterange(e){if(jQuery().daterangepicker&&$("#dashboard-report-range")){var t=[[moment(),moment()],[moment().subtract(1,"days"),moment().subtract(1,"days")],[moment().subtract(2,"days"),moment()],[moment().subtract(6,"days"),moment()],[moment().subtract(29,"days"),moment()],[moment().startOf("month"),moment().endOf("month")],[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],[moment().subtract(1,"year").startOf("month"),moment().subtract(1,"year").endOf("month")],[moment().startOf("quarters"),moment()],[moment().subtract(1,"quarters").startOf("quarters"),moment().subtract(1,"quarters").endOf("quarters")],[moment().quarter(1).startOf("quarters"),moment().quarter(2).endOf("quarters")],[moment().quarter(3).startOf("quarters"),moment().quarter(4).endOf("quarters")],[moment().quarter(1).startOf("quarters"),moment()]],a=["今天","昨天","过去三天","过去一周","过去30天","本月","上月","去年同期","本季度","上季度","上半年","下半年","今年"],n={};a.map(function(e,a){n[e]=t[a]});var r=function(a){return t[a][0].format(e)+" ~ "+t[a][1].format(e)},o=getUrlParam("daterange"),i=null===o?3:Number.parseInt(o);$("#dashboard-report-range").daterangepicker({opens:App.isRTL()?"right":"left",startDate:t[i][0],endDate:t[i][1],minDate:"01/01/2010",maxDate:"12/31/2099",dateLimit:{months:120},showDropdowns:!0,showWeekNumbers:!0,timePicker:!1,timePickerIncrement:1,timePicker12Hour:!1,ranges:n,buttonClasses:["btn btn-sm"],applyClass:" green",cancelClass:["btn btn-sm btn-danger"],format:"MM/DD/YYYY",separator:" to ",locale:{applyLabel:"确定",cancelLabel:"取消",fromLabel:"从",toLabel:"到",customRangeLabel:"时间范围选择",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1}},function(t,a){$("#dashboard-report-range span").html(t.format(e)+" ~ "+a.format(e))}),$("#dashboard-report-range span").html(r(i)),$("#dashboard-report-range").show()}}function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=encodeURI(window.location.search).substr(1).match(t);return null!==a?decodeURI(a[2]):null}function handleParam(e,t,a){var n;return n=0===e.length?a:1===e.length?e[0]:e[t]}function xround(e,t){return e=parseFloat(e),Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function UTF2GBK(e){return escape(e).toLocaleLowerCase().replace(/%u/gi,"\\u")}function GBK2UTF(e){return unescape(e.replace(/\\u/gi,"%u"))}function jsLeft(e,t){return e.substring(0,t)}function jsRight(e,t){return e.substring(e.length-t,e.length)}function jsOnRight(e,t){return e.substring(0,e.length-t)}function getValidateRule(e){var t,a="";return $('form[name="'+e+'"] input[type="text"]').map(function(e){a+='"'+$(this).attr("name")+'":{"required":true,"number":true},'}),$('form[name="'+e+'"] select').map(function(e){a+='"'+$(this).attr("name")+'":{"required":true,"min":0},'}),a="{"+jsOnRight(a,1)+"}",t=$.parseJSON(a),t.remark={require:!1,number:!1},t}function getFormData(e){var t="";$('form[name="'+e+'"] input[type="text"]').map(function(e){t+='"'+$(this).attr("name")+'":"'+$(this).val()+'",'}),$('form[name="'+e+'"] input[type="password"]').map(function(e){t+='"'+$(this).attr("name")+'":"'+$(this).val()+'",'}),$('form[name="'+e+'"] select').map(function(e){t+='"'+$(this).attr("name")+'":"'+$(this).val()+'",'}),t="{"+jsOnRight(t,1)+"}";var a=$.parseJSON(t);return a}function sideBarHack(){$(".page-sidebar-menu li:not(.heading)").addClass("nav-item"),$(".page-sidebar-menu li.heading").addClass("nav-link nav-toggle"),$("ul.page-sidebar-menu a").addClass("nav-link nav-toggle")}function RoundedTheme(e){var t=e?"components-rounded":"components",a=$("#style_components");"components"==t&&"undefined"==typeof a.attr("href")&&a.attr("href",App.getGlobalCssPath()+t+".min.css")}function HeadFix(){$(document.body).outerWidth(!0)>480?$(".page-sidebar-wrapper").css("margin-top","-18px"):$(".page-sidebar-wrapper").css("margin-top","0px")}function handleCurSubMenu(){var e,t,a=window.location.href.split("/")[3],n=a.split("?")[0];if("table"==n||"chart"==n)e=a.split("&")[0];else{var r=window.location.href.split("?")[0].split(location.protocol+"//")[1].split(n)[1];e=n+("undefined"==typeof r?"":r)}t=$('[href="/'+n+'"]').parents("li"),window.location.href.split("/").length>4||"table"==n||"chart"==n?t=$('.page-sidebar [href*="'+e+'"]').parents("li"):"welcome"!=a&&""!==a&&"index.php"!=a||(t=$('[href="/index.php"]').parents("li")),t.addClass("open active selected").find("a.nav-toggle:nth(0)").prepend('<span class="selected"></span>'),t.find(".arrow").addClass("open");var o=t.find("a.nav-toggle:nth(0)").text().trim();""!==o&&(o=o.split("   "),e=o.length>2?o[o.length-2]+" - "+o[o.length-1]:o[o.length-1],$("head title").text(e),$('.page-title [name="TableTitle"]').text(o[o.length-1]))}function appVersionTips(){var e=!1,t=Number.parseFloat(localStorage.appVersion);if("undefined"==typeof localStorage.appVersion?(localStorage.setItem("appVersion",curVersion),e=!0,t=0):t<curVersion&&(e=!0),e){localStorage.setItem("appVersion",curVersion);var a=getRootPath(1)+"/assets/pages/controller/data/update_info.json";json=ReadJson(a);json.appInfo.map(function(e){var a="";e.version>t&&(a+="【版本号】: "+e.version+"</p><p>【更新日期】: "+e.date+"</p><p>【主要内容】：</p>"+e.html,infoTips(a))})}}function extendValidateRule(){jQuery.validator.addMethod("isCartNumber",function(e,t){var a=/^\[1-9]d{3}[A-Za-z]\d{3}$/;return this.optional(t)||a.test(e)},"请检查车号信息是否正确，第4位应为字母"),jQuery.validator.addMethod("isReelCode",function(e,t){var a=/^[1-9]\d{6}[A-Ca-c]$/;return this.optional(t)||a.test(e)},"请检查轴号格式是否正确，最后一位应为幅(字母)")}function whiteBackground(){$("body").addClass("page-content-white").removeClass("page-container-bg-solid")}function toggleSidebar(){$("body").toggleClass("page-sidebar-closed"),$(".page-sidebar-menu").toggleClass("page-sidebar-menu-closed")}function initProd(){var e=getUrlParam("prod");if(null!==e){$(".page-toolbar").css("width","360px"),$("#dashboard-report-range").addClass("col-md-7"),$(".page-toolbar").prepend('<div class="col-md-5"><select class="form-control select2" name="prod_ID"></select></div>');var t=getRootPath(1)+"/api/Api?Token="+config.TOKEN+"&ID=10&M=3&t=1&cache=14400";$.ajax({url:t,async:!1}).done(function(t){var a=handleAjaxData(t);InitSelect("prod_ID",a),SetSelectVal("prod_ID",e)})}}function initDom(e){if(e="undefined"==typeof e?1:e,e&&HeadFix(),null==getUrlParam("tstart")&&null==getUrlParam("tStart")||(infoTips("该页面中含有查询日期响应请求，若查询其它时间段请在主菜单中进入"),$("#dashboard-report-range").hide()),"undefined"!==$("#today")){var t=today(0);null!==getUrlParam("drill")&&(t+=' <span class="badge badge-info"> 数据钻取 </span>'),$("#today").html(t)}jQuery().datepicker&&"undefined"!=typeof $.fn.datepicker.dates&&($.fn.datepicker.dates.en={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",clear:"清除",format:"yyyy-mm-dd",titleFormat:"yyyy年mm月",weekStart:1},$(".date-picker").datepicker({language:"en"})),$("input").on("focus",function(){$(this).select()}),loadMenuSettings(),handleCurSubMenu(),setLocationUrl(),appVersionTips(),initSearchBox()}function setLocationUrl(){lastUrl="undefined"==typeof localStorage.lastUrl?getRootPath(1)+"/welcome":window.location.href,localStorage.setItem("lastUrl",lastUrl)}function hideSidebarTool(){$(".page-header .dropdown-quick-sidebar-toggler").hide()}function loadMenuSettings(){"undefined"!=typeof localStorage.settings_default_menu&&$(".page-sidebar-menu:eq(0)").html(GBK2UTF(localStorage.settings_default_menu))}function handleTable(e,t){$.ajax({url:e}).done(function(e){if(e=handleAjaxData(e),0===e.rows)return t.parent().hide(),void t.html("");t.parent().show();var a="<thead><tr>";e.header.map(function(e){a+="<th>"+e.title+"</th>"}),a+="</tr></thead><tobdy>";var n="";e.data.map(function(e){n="<tr>",e.map(function(e){n+="<td>"+e+"</td>"}),n+="</tr>",a+=n}),a+="</tobdy>",t.html(a)})}function CreateTableHead(e,t){var a="",n="",r="",o=0;return e.header.map(function(e){o&&(n+="<th>"+e.title+"</th>"),o++}),t&&(r="<th>编辑 </th>",r+="<th>删除 </th>"),a+="<tr>"+n+r+"</tr>"}function CreateTableBody(e,t){var a,n,r="",o="",i="";return e.data.map(function(e){n=0,a=e[0],t&&(i='<td><a class="edit" href="javascript:;" data-sn="'+a+'">编辑</a></td>',i+='<td><a class="delete" href="javascript:;" data-sn="'+a+'">删除</a></td>'),o="",e.map(function(e){n&&(o+="<td>"+e+"</td>"),n++}),r+="<tr>"+o+i+"</tr>"}),r}function iCheckBoxInit(){var e=$(".icheck");e.iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"10"})}function SetiCheckChecked(e,t){$(".icheck[name='"+e+"']:nth("+t+")").iCheck("toggle")}function GetiCheckChecked(e){for(var t=$(".icheck[name='"+e+"']").length-1;t>=0;t--)if($(".icheck[name='"+e+"']:nth("+t+")").prop("checked"))return t;return-1}function SetSingleiCheck(e,t){t?$(".icheck[name='"+e+"']").iCheck("check"):$(".icheck[name='"+e+"']").iCheck("unCheck")}function SetRadioChecked(e,t){$("input[name='"+e+"']:nth("+t+")").attr("checked","true")}function GetRadioChecked(e){return $("input[name='"+e+"']:checked").val()}function initSelect2(){function e(e,t){if("undefined"!=typeof t.toPinYin){if(t.toPinYin().indexOf(e.toUpperCase())>=0)return!0;if(t.toPinYinFull().toUpperCase().indexOf(e.toUpperCase())>=0)return!0}return t.toUpperCase().indexOf(e.toUpperCase())>=0}config.select2Inited||(initPinYin(),config.select2Inited=!0),$.fn.select2.defaults.set("theme","bootstrap"),$.fn.select2.amd.require(["select2/compat/matcher"],function(t){$(".select2, .select2-multiple").select2({matcher:t(e),width:null})})}function SetSelect2Val(e,t){$("select[name='"+e+"']").select2("val",t)}function ResetSelect2(e){$("select[name='"+e+"']").select2("val","")}function GetSelect2Text(e){var t="";return $("select[name='"+e+"']").find("option:selected").each(function(){t+=","+this.text}),t.substr(1)}function getCartOrReelStr(e,t){return t=t==config.search.REEL||"undefined"==typeof t?"/paper":"",'<a href="./search'+t+"#"+e+'" target="_blank" title="点击查看生产详情">'+e+"</a>"}function judgeSearchType(e){var t={cart:/^[1-9]\d{3}[A-Za-z]\d{3}$/,reel:/^[1-9]\d{6}[A-Ca-c]$|^[1-9]\d{4}$|^[1-9]\d{4}[A-Ca-c]$|^[1-9]\d{6}$/,gz:/^[A-Za-z]{2}\d{4}$|^[A-Za-z]\d[A-Za-z]\d{3}$|^[A-Za-z]\d{2}[A-Za-z]\d{2}$/,code:/^[A-Za-z]{2}\d{8}$|^[A-Za-z]\d[A-Za-z]\d{7}$|^[A-Za-z]\d{2}[A-Za-z]\d{6}$/};return t.cart.test(e)?config.search.CART:t.reel.test(e)?config.search.REEL:t.code.test(e)?config.search.CODE:t.gz.test(e)?config.search.GZ:config.search.ERR}function isDateTime(e){var t=/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}/;return t.test(e)}function AutoRefresh(e,t){var a=setInterval(function(){e()},t);$("body").data("refershID",a)}function StopRefresh(){"undefined"!=typeof $("body").data("refreshID")&&clearInterval($("body").data("refreshID"))}function getDateRange(){var e=$("#dashboard-report-range span").html(),t={start:e.split(" ~ ")[0],end:e.split(" ~ ")[1]};return t}function arrayRemove(e,t){if(isNaN(t)||t>e.length)return!1;for(var a=0,n=0;a<e.length;a++)e[a]!=e[t]&&(e[n++]=e[a]);e.length-=1}function isUndefined(e){return void 0===e}function getWeekdayByDate(e){var t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],a=new Date(Date.parse(e.replace(/-/g,"/")));return t[a.getDay()]}function getSimpleEChart(e,t){return t=0|t,{tooltip:{trigger:"bar"==e.type?"item":"axis",formatter:"{b}<br>{c}%"},color:["#e12330"],xAxis:{type:"category",boundaryGap:"bar"==e.type,data:e.xAxis,axisTick:{show:!1},axisLine:{show:!1},show:t},grid:{x:t?50:30,y:10,x2:10,y2:20},yAxis:{type:"value",axisTick:{show:!1},axisLine:{show:!1},min:0,max:100},series:[{type:e.type,smooth:!0,barMaxWidth:25,data:e.yAxis}]}}function initPinYin(){var e=getRootPath(1)+"/assets/pages/controller/data/pinyin_list.min.json";$.ajax({url:e}).done(function(e){function t(t,n){for(var r=t.length,o="",i=new RegExp("[a-zA-Z0-9- ]"),s=0;s<r;s++){var c=t.substr(s,1),l=a(c,e,n);i.test(c)?o+=c:l!==!1&&(o+=l)}for(o=o.replace(/ /g,"-");o.indexOf("--")>0;)o=o.replace("--","-");return o}function a(t,a,r){for(var o in e)if(e[o].indexOf(t)!=-1)return n(o,r);return!1}function n(e,t){if(e.length>0){var a=e.substr(0,1).toUpperCase(),n=t?"":e.substr(1,e.length);return a+n}}String.prototype.toPinYin=function(){return t(this,!0)},String.prototype.toPinYinFull=function(){return t(this,!1)}})}const curVersion=1.46;"undefined"!=typeof moment&&moment.locale("zh-cn");const TBL={PHYSIC:0,CHEM:1,SURFACE:2,PPR_OPR:3,PPR_PROD:4,PPR_MCH:5,PRT_PROD:6,PRT_MCH:7,PPR_VALIDATE:8,PRINT_FAKEPIECE:9,PPR_FALSEWASTE:10,PPR_BATCHWASTE:11,PPR_PENALTY:12,PPR_ABNORMAL:13,PRINT_ENDURANCE:14,PRINT_MANUALFLUORANCE:15,USR:20,DPMT:21,WORK_LOG_PROC:22,WORK_LOG:25,WORK_LOG_STUS:26,WORK_ERR_LIST:27,MICRO_BLOG:28,DB:29,API:30,SELECT:31,WORK_LOG_OPR:32,SETTINGS_MENULIST:33,SETTINGS_MENUDETAIL:34},config={TOKEN:"79d84495ca776ccb523114a2120e273ca80b315b",search:{ERR:-1,CART:0,REEL:1,CODE:2,GZ:3,PAPERNO:4,CODENO:5},TPL:getRootPath(1)+"/assets/pages/controller/data/tpl/",SHOWDEBUGTIME:!0,select2Inited:!1,cache:10,info:{select2:!1,table:!1}};window.console&&window.console.info("喜欢看 质量控制中心 的代码，还是发现了什么bug？不如和我们一起为它添砖加瓦吧！\n电话:8275-6129；\n微信:宾不厌诈");var dataConv=function(){return{currency:function(e){e=e.toString().split("").reverse().join("");for(var t="",a=0;a<e.length;a++)t+=e[a]+((a+1)%3===0&&a+1!=e.length?",":"");return t.split("").reverse().join("")},data:function(e){return parseInt(e.replace(",",""),10)}}},initAvatarImages=function(){function e(e){$(".username").parent().find("img").attr("src",e),$(".profile-userpic img").attr("src",e),$(".lock-avatar-block img").attr("src",e)}(function(){var t,a=1==$(".username").data("set-avatar")?$(".username").data("avatar"):"Avatar_none";t="undefined"!=typeof localStorage.avatarUrl?localStorage.avatarUrl:getRootPath(1)+"/demo/avatar/"+a+".jpg",t.indexOf(location.protocol+"//")!=-1?$.ajax({url:getRootPath(1)+"/api/base64?src="+t}).done(function(t){e(t),localStorage.setItem("avatarUrl",t)}):e(t)})()}(),initSearchBox=function(){function e(){if($(".search-form").hasClass("open")){var e,t=$("[name=query]").val().toUpperCase(),a=judgeSearchType(t),n=window.location.pathname;if((n.indexOf("table")>0||n.indexOf("table")>0)&&location.hash.indexOf("cart")>0)return void(location.hash="#cart="+t.toUpperCase());switch(a){case config.search.CART:case config.search.GZ:case config.search.CODE:e=getRootPath(1)+"/search/#"+t;break;case config.search.REEL:e=getRootPath(1)+"/search/paper#"+t;break;default:bsTips("暂时只支持车号/轴号/冠字号/轴号查询，请确认输入格式")}a>config.search.ERR&&(0!==n.indexOf("/search")&&0!==n.indexOf("/search/paper")||0===n.indexOf("/search/feedback")?window.location.href=e:(location.hash=t,$(".search-form .submit").attr("href","#"+t)))}}$(".search-form .icon-magnifier").on("click",function(){e()}),$(".search-form").on("keydown",function(t){13===t.keyCode&&e()})};$("#QueryData").on("click",function(){$("body").toggleClass("page-quick-sidebar-open"),App.scrollTop()});var randomData=function(){return{flot:function(e,t,a){for(var n=[],r=[];n.length<e;){var o=n.length>0?n[n.length-1]:t,i=o+10*Math.random()-5;n.push(i)}for(var s=0;s<n.length;++s)r.push([s,n[s]]);return r}}}();$('form input[type="text"]').keydown(function(e){var t,a=e.keyCode,n=$('input[type="text"]:not(.date-picker,[name="query"]):enabled');switch(a){case 37:case 38:case 107:e.preventDefault(),t=n.index(this)-1,t>=0&&n.eq(t).focus();break;case 39:case 40:case 13:e.preventDefault(),t=n.index(this)+1,n.eq(t).focus()}});var shareTableExample=function(e){var t=$.base64.encode((new Date).getTime());$("#share textarea").text(" ");var a=getUrlParam("fixheader");$.ajax({url:getRootPath(0)+"/demo/tableShare.php",type:"POST",async:!1,data:{filename:t+".html",contents:e},success:function(e){try{var t=$.parseJSON(e),n=getRootPath(0)+t.url+("0"==a?"?fixheader=0":"");$("#share textarea").text(n),$("#successShare").click()}catch(t){console.log(t),infoTips(e),bsTips("报表分享失败，请稍后重试",0)}},error:function(e){console.log(e),bsTips("报表分享失败，请稍后重试",0)}})},tpl=function(){function t(e){return e.split(".etpl")[0]}function a(e,a){var n=t(e);return s[n](a)}function n(e,t,n){var r=a(e,t);n.html(r);var o=n.find("[name=isodate]");o.length&&"function"==typeof $.fn.prettyDate&&$("[name=isodate]").prettyDate({interval:1e4}),n.find(".scroller").length&&App.initSlimScroll(".scroller")}function r(){etpl.addFilter("slice",function(e,t,a){return e.slice(t,a)}),etpl.addFilter("quote",function(e,t,a){return t[a]})}function o(e,a){e.map(function(n,r){$.ajax({url:config.TPL+n}).done(function(o){var i=t(n);s[i]=etpl.compile(o),r==e.length-1&&(c=!0,"undefined"!=typeof a&&a())})})}function i(t,a,n,r){$.ajax({url:a}).done(function(e){return e=handleAjaxData(e),0===e.rows?void t.html("<h4> 未搜索到相关信息 </h4>"):("function"==typeof r&&r(e),"undefined"==typeof n&&(n=[{start:1,end:e.cols,dom:t,title:e.title,showHead:!1,direction:"hor",repeat:{switch:!1},class:""}]),void n.map(function(a){var n={title:a.title,rows:e.rows,cols:e.cols,source:e.source,header:e.header.slice(a.start,a.end),noScroll:1,class:"undefined"==typeof a.class?"":a.class,showHead:a.showHead,data:[]};"undefined"!=typeof a.repeat&&a.repeat.switch?(n.header=e.header.slice(a.repeat.start,a.repeat.end).concat(n.header),e.data.map(function(e){n.data.push(e.slice(a.repeat.start,a.repeat.end).concat(e.slice(a.start,a.end)))})):e.data.map(function(e){n.data.push(e.slice(a.start,a.end))}),"undefined"==typeof a.dom&&(a.dom=t),tpl.render("hor"==a.direction?"simpleTable.etpl":"search/screenQuality.etpl",n,a.dom)}))}).fail(function(){console.log("read data error:<br>"),console.log(e.responseText)})}var s={},c=!1;return{init:function(e,t){r(),o(e,t)},isInited:function(){return c},render:n,getHTML:a,renderTable:i}}(),RGB2Lab=function(e){var t=function(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92},a=t(e.b/255),n=t(e.g/255),r=t(e.r/255),o=.412453*r+.35758*n+.180423*a,i=.212671*r+.71516*n+.072169*a,s=.019334*r+.119193*n+.950227*a;o/=.95047,s/=1.08883;var c=o>.008856?Math.pow(o,1/3):7.787*o+16/116,l=i>.008856?Math.pow(i,1/3):7.787*i+16/116,d=s>.008856?Math.pow(s,1/3):7.787*s+16/116,u={l:i>.008856?116*l-16:903.3*i,a:500*(c-l),b:200*(l-d)};return{l:parseInt(u.l.toFixed(0),10),a:parseInt(u.a.toFixed(0),10),b:parseInt(u.b.toFixed(0),10)}},Lab2RGB=function(e){function t(e){var t=Math.pow(e,3);return t>.008856?t:(e-16/116)/7.787}function a(e){return e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:e=12.92*e,parseInt((255*e).toFixed(0),10)}var n=e.L,r=e.a,o=e.b,i=(n+16)/116,s=r/500+i,c=i-o/200;s=t(s),i=t(i),c=t(c);var l=95.047*s,d=108.883*c;return s=l/100,c=d/100,var_R=3.2406*s-1.5372*i-.4986*c,var_G=.9689*-s+1.8758*i+.0415*c,var_B=.0557*s-.204*i+1.057*c,{r:a(var_R),g:a(var_G),b:a(var_B)}};
var gulp=require("gulp"),uglify=require("gulp-uglify"),concat=require("gulp-concat"),imagemin=require("gulp-imagemin"),sourcemaps=require("gulp-sourcemaps"),del=require("del"),cssmin=require("gulp-minify-css"),rev=require("gulp-rev"),header=require("gulp-header"),footer=require("gulp-footer"),jshint=require("gulp-jshint"),cached=require("gulp-cached"),remember=require("gulp-remember"),changed=require("gulp-changed"),rename=require("gulp-rename"),SRC={images:"./src/img/*"},taskList=require("./settings/tasklist.js"),DEST={scripts:"../assets/build/js",images:"build/img",css:"../assets/build/css"};gulp.task("clean",function(){return del(["build"])}),gulp.task("js",function(){function e(e){console.log("正在编译"+e+"..."),gulp.src(taskList[e].js).pipe(changed(DEST.scripts)).pipe(sourcemaps.init()).pipe(uglify()).pipe(cached("scripts")).pipe(jshint()).pipe(remember("scripts")).pipe(concat(e+".min.js")).pipe(gulp.dest(DEST.scripts))}for(var i in taskList)"undefined"!=typeof taskList[i].js&&e(i)}),gulp.task("css",function(){function e(e){gulp.src(taskList[e].css).pipe(concat(e+".min.css")).pipe(cssmin({advanced:!1,compatibility:"ie7",keepBreaks:!1})).pipe(gulp.dest(DEST.css))}for(var i in taskList)"undefined"!=typeof taskList[i].css&&e(i)}),gulp.task("img",function(){return gulp.src(SRC.images).pipe(imagemin({optimizationLevel:5})).pipe(gulp.dest(DEST.images))}),gulp.task("default",["js","img","css"]);